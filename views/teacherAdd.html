<!DOCTYPE html>
<html>

<head>
    <title>feedback | coursefeedback</title>
    <link rel="import" href="/library.html">
</head>

<body>
    <!-- datatable -->
    <div id="jesus"></div>
    <br>

    <script>
        var color = d3.scale.linear().domain([0, 1, 2, 3, 4, 5, 6, 10, 15, 20, 100]).range(["#ddd", "#ccc", "#bbb", "#aaa", "#999",
            "#888", "#777", "#666", "#555", "#444", "#333", "#222"]);

        var frequency_list = [{ "text": "study", "size": 40 }, { "text": "motion", "size": 15 }, { "text": "forces", "size": 10 }, { "text": "electricity", "size": 15 }, { "text": "movement", "size": 10 }, { "text": "relation", "size": 5 }, { "text": "things", "size": 10 }, { "text": "force", "size": 5 }, { "text": "defintions", "size": 5 }, { "text": "two", "size": 15 }, { "text": "grouped", "size": 15 }, { "text": "traditional", "size": 40 }, { "text": "fields", "size": 15 }, { "text": "acoustics", "size": 15 }, { "text": "optics", "size": 15 }, { "text": "mechanics", "size": 20 }, { "text": "thermodynamics", "size": 15 }, { "text": "electromagnetism", "size": 15 }, { "text": "modern", "size": 15 }, { "text": "extensions", "size": 15 }, { "text": "thefreedictionary", "size": 15 }, { "text": "interaction", "size": 15 }, { "text": "org", "size": 25 }, { "text": "answers", "size": 5 }, { "text": "natural", "size": 15 }, { "text": "objects", "size": 5 }, { "text": "treats", "size": 10 }, { "text": "acting", "size": 5 }, { "text": "department", "size": 5 }, { "text": "gravitation", "size": 5 }, { "text": "heat", "size": 10 }, { "text": "light", "size": 10 }, { "text": "magnetism", "size": 10 }, { "text": "modify", "size": 5 }, { "text": "general", "size": 10 }, { "text": "bodies", "size": 5 }, { "text": "philosophy", "size": 5 }, { "text": "brainyquote", "size": 5 }, { "text": "words", "size": 5 }, { "text": "ph", "size": 5 }, { "text": "html", "size": 5 }, { "text": "lrl", "size": 5 }, { "text": "zgzmeylfwuy", "size": 5 }, { "text": "subject", "size": 5 }, { "text": "distinguished", "size": 5 }, { "text": "chemistry", "size": 5 }, { "text": "biology", "size": 5 }, { "text": "includes", "size": 5 }, { "text": "radiation", "size": 5 }, { "text": "sound", "size": 5 }, { "text": "structure", "size": 5 }, { "text": "atoms", "size": 5 }, { "text": "including", "size": 10 }, { "text": "atomic", "size": 10 }, { "text": "nuclear", "size": 10 }, { "text": "cryogenics", "size": 10 }, { "text": "solid-state", "size": 10 }, { "text": "particle", "size": 10 }, { "text": "plasma", "size": 10 }, { "text": "deals", "size": 5 }, { "text": "merriam-webster", "size": 5 }, { "text": "dictionary", "size": 10 }, { "text": "analysis", "size": 5 }, { "text": "conducted", "size": 5 }, { "text": "order", "size": 5 }, { "text": "understand", "size": 5 }, { "text": "behaves", "size": 5 }, { "text": "en", "size": 5 }, { "text": "wikipedia", "size": 5 }, { "text": "wiki", "size": 5 }, { "text": "physics-", "size": 5 }, { "text": "physical", "size": 5 }, { "text": "behaviour", "size": 5 }, { "text": "weight", "size": 5 }, { "text": "electrical", "size": 5 }, { "text": "power", "size": 5 }];


        $(document).ready(function () {
            initgraph();
            setInterval(reinitgraph, 3000);
        });

        function findMax() {
            var max = 0;
            for (let a of frequency_list) {
                if (a.size > max)
                    max = a.size;
            }
            return max;
        }

        function reinitgraph() {
            d3.select("svg").remove();
            console.log("refresh");
            initgraph();
        }

        function initgraph() {
            var max = findMax();
            d3.layout.cloud().size([800, 300])
                .words(frequency_list)
                .rotate(0)
                .fontSize(function (d) { return d.size; })
                .on("end", draw)
                .start(max);
        }

        function draw(words) {
            d3.select("#jesus").append("svg")
                .attr("width", 850)
                .attr("height", 350)
                .attr("class", "wordcloud")
                .append("g")
                // without the transform, words words would get cutoff to the left and top, they would
                // appear outside of the SVG area
                .attr("transform", "translate(320,200)")
                .selectAll("text")
                .data(words)
                .enter().append("text")
                .style("font-size", function (d) { return d.size + "px"; })
                .style("fill", function (d, i) { return color(i); })
                .attr("transform", function (d) {
                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                })
                .text(function (d) { return d.text; });
        }
    </script>
</body>
<html>